<!-- TTT-Chronik Page -->
<ttt-page-layout [pageTitle]="pageTitle" [pageSubtitle]="pageSubtitle">
  <!-- Warum gibt es ein TTT? Section -->
  <div class="mb-8">
    <div class="ttt-content-card py-6 px-6">
      <!-- Section Header -->
      <div class="mb-4 border-b border-tttGray-700 pb-3">
        <div class="flex items-center gap-3 mb-2">
          <i class="pi pi-question-circle text-tttRed text-xl"></i>
          <h2 class="text-2xl font-bold text-tttWhite">Warum gibt es ein TTT?</h2>
        </div>
        <p class="text-sm text-tttRed">Die Entstehungsgeschichte unserer Community</p>
      </div>

      <!-- Content -->
      <div class="text-base text-tttGray-300 space-y-4 leading-relaxed">
        <p>Das Tactical Training Team (TTT) ist der Nachfolger des Projekts "GT-Kommando", das Ende 2012 entwickelt wurde. Ursprünglich entstand GT-Kommando aus dem Frust über mangelnde Koordination in der Community. Es sollte ein Arma-Grundlagentraining basierend auf militärischen Unterlagen entstehen.</p>

        <p>Nach einigen erfolgreichen Monaten entwickelte sich jedoch Unbehagen, insbesondere zwischen trainierten und untrainierten Spielern. Daher wurde das GT-Kommando-Projekt eingestellt und später das TTT-Projekt ins Leben gerufen. Dieses konzentrierte sich auf paramilitärische Einheiten, aber mit einem ähnlichen Programm.</p>

        <p>Die Gründung des TTT war das Ergebnis einer Marktanalyse der Arma3-Community. Es wurde festgestellt, dass es keine Gruppe gab, die die gewünschte Kombination aus Training, realistischem Teamspiel und einer offenen Community bot. Die Arma-Communities wurden grob in Fun-Clans, Multigaming-Communities, MilSim-Einheiten mit realem Hintergrund und offene Arma-Communities unterteilt.</p>

        <p>Das TTT wurde gegründet, um diese Lücke zu füllen und sich auf Training, realistisches Teamspiel und einer offenen Community zu konzentrieren. Es sollte eine flexible und zugängliche Einheit sein, unabhängig von einem spezifischen militärischen Vorbild.</p>

        <p>Obwohl diese Ausrichtung Herausforderungen mit sich bringt, wie den Bedarf an ständiger Abstimmung und klaren Strukturen, ist das Ziel des TTT, eine Community aufzubauen, die die Bedürfnisse der Spieler erfüllt.</p>

        <p class="text-tttWhite font-medium">
          <i class="pi pi-user text-tttRed mr-2"></i>
          Gegründet wurde das TTT von <strong>relain</strong>, der im April 2015 von seiner Leitungsposition zurückgetreten ist.
        </p>
      </div>
    </div>
  </div>

  <!-- Timeline Section -->
  <div class="mb-8">
    <div class="mb-6 ttt-text-center">
      <h2 class="ttt-section-title mb-2 flex items-center justify-center gap-3">
        <i class="pi pi-clock text-tttRed"></i>
        TTT Timeline
      </h2>
      <p class="ttt-description-text">Meilensteine des Tactical Training Teams</p>
    </div>

    <!-- Timeline Container - Sehr kompakte Karten mit Ausklapp-Effekt -->
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 items-stretch">
      <div *ngFor="let event of timelineEvents; trackBy: trackByIndex" class="relative h-full">
        <!-- Kompakte Timeline Card -->
        <div
          role="button"
          tabindex="0"
          class="group ttt-content-card p-2 text-left transition-all duration-200 hover:border-tttRed/40 hover:bg-tttRed/5 relative min-h-[110px] h-full flex flex-col justify-between shadow-md"
          [ngClass]="{
            'bg-tttRed/10 border-tttRed/70': event.expanded
          }"
          (click)="toggleEventDetails(event)"
          (keydown)="handleEventKeyboard(event, $event)"
          [attr.aria-label]="'Details für ' + event.title + (event.expanded ? ' ausblenden' : ' anzeigen')"
          [attr.aria-expanded]="event.expanded"
        >
          <div class="flex items-center gap-2 mb-1 min-w-0">
            <div class="flex h-7 w-7 items-center justify-center rounded border-2 shadow-sm flex-shrink-0" [ngClass]="event.color">
              <i [class]="'pi ' + event.icon + ' text-xs'"></i>
            </div>
            <div class="flex-1 min-w-0">
              <h3 class="text-base font-bold text-tttWhite group-hover:text-tttRed transition-colors duration-200 truncate max-w-[120px] md:max-w-[160px]" title="{{ event.title }}">
                {{ event.title }}
              </h3>
            </div>
          </div>
          <div class="flex flex-col items-center gap-1 mb-1 min-w-0">
            <span class="text-xs px-2 py-0.5 rounded font-medium truncate max-w-[100px] text-center" [ngClass]="event.color" title="{{ getEventTypeLabel(event.type) }}">
              {{ getEventTypeLabel(event.type) }}
            </span>
            <span class="text-xs text-tttGray-400 text-center" title="{{ event.date }}">{{ event.date }}</span>
          </div>
          <div class="mb-1">
            <p class="text-xs text-tttGray-300 leading-snug line-clamp-3">{{ event.description }}</p>
          </div>
          <div class="flex justify-center mt-1">
            <i class="pi text-xs text-tttGray-500 transition-transform duration-200"
               [class.pi-chevron-down]="!event.expanded"
               [class.pi-chevron-up]="event.expanded" aria-hidden="true"></i>
          </div>
        </div>
        <!-- Expanded Details -->
        <div *ngIf="event.expanded" class="absolute z-10 left-0 right-0 mt-2 ttt-content-card p-3 border-tttRed/70 bg-tttRed/10 shadow-xl animate-fadeIn">
          <button (click)="toggleEventDetails(event)"
                  class="absolute top-2 right-2 w-6 h-6 rounded-full bg-tttGray-800/70 flex items-center justify-center hover:bg-tttRed/30 transition-all duration-200"
                  tabindex="-1"
                  aria-label="Details schließen">
            <i class="pi pi-times text-tttGray-400 text-sm" aria-hidden="true"></i>
          </button>
          <div *ngIf="event.details && event.details.length > 0">
            <h4 class="text-xs font-semibold text-tttWhite uppercase tracking-wide mb-1">Weitere Details:</h4>
            <ul class="space-y-1">
              <li *ngFor="let detail of event.details" class="flex items-start gap-2 text-xs text-tttGray-400">
                <i class="pi pi-angle-right text-tttRed mt-0.5 text-xs flex-shrink-0"></i>
                <span>{{ detail }}</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Mission Briefing - Fiktive Geschichte -->
  <div class="mb-8">
    <div class="ttt-content-card py-4 px-5 group relative hover:border-tttRed/50 hover:bg-tttRed/5 transition-all duration-300">
      <!-- Section Header -->
      <div class="mb-3 border-b border-tttRed/30 pb-2 group-hover:border-tttRed/50 transition-colors duration-300">
        <div class="flex items-center gap-2 mb-2">
          <i class="pi pi-shield text-tttRed group-hover:scale-110 transition-transform duration-300"></i>
          <h2 class="text-xl font-bold text-tttWhite group-hover:text-tttRed transition-colors duration-300">Fiktive Geschichte des TTT</h2>
        </div>
        <p class="text-sm text-tttRed group-hover:text-tttRed-300 transition-colors duration-300">Abteilung 22 - Operative Geschichtsschreibung</p>
      </div>

      <!-- Fiktive Geschichte Content -->
      <div class="text-sm text-tttGray-300 space-y-3 group-hover:text-tttGray-200 transition-colors duration-300">
        <div class="mt-4 flex items-center gap-2">
          <a [href]="fictionDocumentationLink"
             target="_blank"
             class="inline-flex items-center gap-2 rounded-lg border border-tttWhite/30 bg-tttWhite/10 px-3 py-1 text-xs font-bold text-tttWhite transition-all duration-300 hover:bg-tttWhite/20 group-hover:border-tttRed/40 group-hover:bg-tttRed/10">
            <i class="pi pi-external-link group-hover:scale-105 transition-transform duration-300"></i>
            Vollständige Dokumentation
          </a>
        </div>
      </div>

      <!-- Hover Glow Effect -->
      <div class="absolute inset-0 rounded-xl bg-gradient-to-br from-tttRed/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"></div>
    </div>
  </div>

  <!-- Call to Action -->
  <div class="ttt-text-center">
    <div class="ttt-content-card py-4 px-5">
      <h2 class="text-xl font-bold text-tttWhite mb-2">Werde Teil der Geschichte</h2>
      <p class="text-sm text-tttGray-300 mb-4">
        Die Chronik des TTT wird täglich fortgeschrieben.
      </p>
      <div class="flex flex-col sm:flex-row gap-3 justify-center">
        <!-- Discord Link -->
        <a href="https://discord.tacticalteam.de"
           target="_blank"
           rel="noopener noreferrer"
           class="ttt-btn-primary">
          <i class="pi pi-discord"></i>
          Discord
        </a>

        <!-- Mitmachen Link -->
        <a routerLink="/mitmachen"
           class="ttt-btn-secondary">
          <i class="pi pi-users"></i>
          Mitmachen
        </a>
      </div>
    </div>
  </div>
</ttt-page-layout>
