<!-- TTT chronicle page -->
<ttt-page-layout [pageTitle]="pageTitle" [pageSubtitle]="pageSubtitle">
    <!-- Why TTT? section -->
    <div class="mb-8">
        <div class="ttt-content-card px-6 py-6">
            <!-- Section header -->
            <div class="border-tttGray-700 mb-4 border-b pb-3">
                <div class="mb-2 flex items-center gap-3">
                    <i class="pi pi-question-circle text-tttRed text-xl"></i>
                    <h2 class="text-tttWhite text-2xl font-bold">Warum gibt es ein TTT?</h2>
                </div>
                <p class="text-tttRed text-sm">Die Entstehungsgeschichte unserer Community</p>
            </div>

            <!-- Content -->
            <div class="text-tttGray-300 space-y-4 text-base leading-relaxed">
                <p>
                    Das Tactical Training Team (TTT) ist der Nachfolger des Projekts "GT-Kommando", das Ende 2012 entwickelt wurde.
                    Ursprünglich entstand GT-Kommando aus dem Frust über mangelnde Koordination in der Community. Es sollte ein
                    Arma-Grundlagentraining basierend auf militärischen Unterlagen entstehen.
                </p>

                <p>
                    Nach einigen erfolgreichen Monaten entwickelte sich jedoch Unbehagen, insbesondere zwischen trainierten und
                    untrainierten Spielern. Daher wurde das GT-Kommando-Projekt eingestellt und später das TTT-Projekt ins Leben gerufen.
                    Dieses konzentrierte sich auf paramilitärische Einheiten, aber mit einem ähnlichen Programm.
                </p>

                <p>
                    Die Gründung des TTT war das Ergebnis einer Marktanalyse der Arma3-Community. Es wurde festgestellt, dass es keine
                    Gruppe gab, die die gewünschte Kombination aus Training, realistischem Teamspiel und einer offenen Community bot. Die
                    Arma-Communities wurden grob in Fun-Clans, Multigaming-Communities, MilSim-Einheiten mit realem Hintergrund und offene
                    Arma-Communities unterteilt.
                </p>

                <p>
                    Das TTT wurde gegründet, um diese Lücke zu füllen und sich auf Training, realistisches Teamspiel und einer offenen
                    Community zu konzentrieren. Es sollte eine flexible und zugängliche Einheit sein, unabhängig von einem spezifischen
                    militärischen Vorbild.
                </p>

                <p>
                    Obwohl diese Ausrichtung Herausforderungen mit sich bringt, wie den Bedarf an ständiger Abstimmung und klaren
                    Strukturen, ist das Ziel des TTT, eine Community aufzubauen, die die Bedürfnisse der Spieler erfüllt.
                </p>

                <p class="text-tttWhite font-medium">
                    <i class="pi pi-user text-tttRed mr-2"></i>
                    Gegründet wurde das TTT von <strong>relain</strong>, der im April 2015 von seiner Leitungsposition zurückgetreten ist.
                </p>
            </div>
        </div>

        <!-- Timeline section -->
        <div class="mb-8">
            <div class="ttt-text-center mb-6">
                <h2 class="ttt-section-title mb-2 flex items-center justify-center gap-3">
                    <i class="pi pi-clock text-tttRed"></i>
                    TTT-Timeline
                </h2>
                <p class="ttt-description-text">Meilensteine des Tactical Training Teams</p>
            </div>

            <!-- Timeline container - compact cards with expandable details -->
            <div class="grid grid-cols-2 items-stretch gap-4 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5">
                <div *ngFor="let event of timelineEvents; trackBy: trackByIndex" class="relative h-full">
                    <button
                        type="button"
                        class="group ttt-content-card hover:border-tttRed/40 hover:bg-tttRed/5 relative flex h-full min-h-[110px] flex-col justify-between p-2 text-left shadow-md transition-all duration-200"
                        [ngClass]="{
                            'bg-tttRed/10 border-tttRed/70': event.expanded,
                        }"
                        (click)="toggleEventDetails(event)"
                        (keydown)="handleEventKeyboard(event, $event)"
                        [attr.aria-label]="'Details für ' + event.title + (event.expanded ? ' ausblenden' : ' anzeigen')"
                        [attr.aria-expanded]="event.expanded"
                    >
                        <div class="mb-1 flex min-w-0 items-center gap-2">
                            <div
                                class="flex h-7 w-7 flex-shrink-0 items-center justify-center rounded border-2 shadow-sm"
                                [ngClass]="event.color"
                            >
                                <i [class]="'pi ' + event.icon + ' text-xs'"></i>
                            </div>
                            <div class="min-w-0 flex-1">
                                <h3
                                    class="text-tttWhite group-hover:text-tttRed max-w-[120px] truncate text-base font-bold transition-colors duration-200 md:max-w-[160px]"
                                    title="{{ event.title }}"
                                >
                                    {{ event.title }}
                                </h3>
                            </div>
                        </div>
                        <div class="mb-1 flex min-w-0 flex-col items-center gap-1">
                            <span
                                class="max-w-[100px] truncate rounded px-2 py-0.5 text-center text-xs font-medium"
                                [ngClass]="event.color"
                                title="{{ getEventTypeLabel(event.type) }}"
                            >
                                {{ getEventTypeLabel(event.type) }}
                            </span>
                            <span class="text-tttGray-400 text-center text-xs" title="{{ event.date }}">{{ event.date }}</span>
                        </div>
                        <div class="mb-1">
                            <p class="text-tttGray-300 line-clamp-3 text-xs leading-snug">{{ event.description }}</p>
                        </div>
                        <div class="mt-1 flex justify-center">
                            <i
                                class="pi text-tttGray-500 text-xs transition-transform duration-200"
                                [class.pi-chevron-down]="!event.expanded"
                                [class.pi-chevron-up]="event.expanded"
                                aria-hidden="true"
                            ></i>
                        </div>
                    </button>
                    <!-- Expanded details -->
                    <div
                        *ngIf="event.expanded"
                        class="ttt-content-card border-tttRed/70 bg-tttRed/10 animate-fadeIn absolute right-0 left-0 z-10 mt-2 p-3 shadow-xl"
                    >
                        <button
                            (click)="toggleEventDetails(event)"
                            class="bg-tttGray-800/70 hover:bg-tttRed/30 absolute top-2 right-2 flex h-6 w-6 items-center justify-center rounded-full transition-all duration-200"
                            tabindex="-1"
                            aria-label="Details schließen"
                        >
                            <i class="pi pi-times text-tttGray-400 text-sm" aria-hidden="true"></i>
                        </button>
                        <div *ngIf="event.details && event.details.length > 0">
                            <h4 class="text-tttWhite mb-1 text-xs font-semibold tracking-wide uppercase">Weitere Details:</h4>
                            <ul class="space-y-1">
                                <li *ngFor="let detail of event.details" class="text-tttGray-400 flex items-start gap-2 text-xs">
                                    <i class="pi pi-angle-right text-tttRed mt-0.5 flex-shrink-0 text-xs"></i>
                                    <span>{{ detail }}</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mission briefing - fictional story -->
    <div class="mb-8">
        <div class="ttt-content-card group hover:border-tttRed/50 hover:bg-tttRed/5 relative px-5 py-4 transition-all duration-300">
            <!-- Section header -->
            <div class="border-tttRed/30 group-hover:border-tttRed/50 mb-3 border-b pb-2 transition-colors duration-300">
                <div class="mb-2 flex items-center gap-2">
                    <i class="pi pi-shield text-tttRed transition-transform duration-300 group-hover:scale-110"></i>
                    <h2 class="text-tttWhite group-hover:text-tttRed text-xl font-bold transition-colors duration-300">
                        Fiktive Geschichte des TTT
                    </h2>
                </div>
                <p class="text-tttRed group-hover:text-tttRed-300 text-sm transition-colors duration-300">
                    Abteilung 22 - Operative Geschichtsschreibung
                </p>
            </div>

            <!-- Fictional story content -->
            <div class="text-tttGray-300 group-hover:text-tttGray-200 space-y-3 text-sm transition-colors duration-300">
                <div class="mt-4 flex items-center gap-2">
                    <a
                        [href]="fictionDocumentationLink"
                        target="_blank"
                        class="border-tttWhite/30 bg-tttWhite/10 text-tttWhite hover:bg-tttWhite/20 group-hover:border-tttRed/40 group-hover:bg-tttRed/10 inline-flex items-center gap-2 rounded-lg border px-3 py-1 text-xs font-bold transition-all duration-300"
                    >
                        <i class="pi pi-external-link transition-transform duration-300 group-hover:scale-105"></i>
                        Vollständige Dokumentation
                    </a>
                </div>
            </div>

            <!-- Hover glow effect -->
            <div
                class="from-tttRed/5 pointer-events-none absolute inset-0 rounded-xl bg-gradient-to-br to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"
            ></div>
        </div>
    </div>

    <!-- Call to Action -->
    <div class="ttt-text-center">
        <div class="ttt-content-card px-5 py-4">
            <h2 class="text-tttWhite mb-2 text-xl font-bold">Werde Teil der Geschichte</h2>
            <p class="text-tttGray-300 mb-4 text-sm">Die Chronik des TTT wird täglich fortgeschrieben.</p>
            <div class="flex flex-col justify-center gap-3 sm:flex-row">
                <!-- Discord Link -->
                <a href="https://discord.tacticalteam.de" target="_blank" rel="noopener noreferrer" class="ttt-btn-primary">
                    <i class="pi pi-discord"></i>
                    Discord
                </a>

                <!-- Mitmachen Link -->
                <a routerLink="/mitmachen" class="ttt-btn-secondary">
                    <i class="pi pi-users"></i>
                    Mitmachen
                </a>
            </div>
        </div>
    </div>
</ttt-page-layout>
